### Aptos Keyless에서 트랜잭션 서명 과정
1. **임시 키 생성**: 사용자는 임시 키 쌍(EPK 및 ESK)을 생성합니다. EPK는 dApp에 저장되고, ESK는 사용자가 보관합니다.
2. **JWT 획득**: dApp은 OIDC 제공자(예: Google)로부터 JWT(JSON Web Token)를 획득합니다. 이 JWT에는 사용자의 신원, dApp의 신원, EPK 커밋먼트가 포함됩니다.
3. **영지식 증명 생성**: dApp은 필요한 정보를 증명 서비스에 보내 영지식 증명(ZKP)을 생성합니다. 이는 사용자의 주소와 EPK를 연결하지만 민감한 정보를 드러내지 않습니다.
4. **트랜잭션 제출**: dApp은 사용자로부터 임시 서명을 받아 트랜잭션, ZKP, EPK 및 서명을 블록체인 검증자에게 보냅니다.
5. **검증 및 실행**: 검증자는 EPK, ZKP 및 임시 서명을 확인한 후, 유효한 경우 트랜잭션을 실행합니다.
### EPK 커밋먼트
EPK 커밋먼트는 사용자가 생성한 임시 공개 키(EPK)를 기반으로 생성되는 커밋먼트입니다. 이 커밋먼트는 사용자의 신원과 EPK를 연결하는 역할을 하며, 사용자의 개인 정보를 드러내지 않으면서 EPK가 유효한지 검증할 수 있도록 도와줍니다. 이 과정에서 영지식 증명(ZKP)을 사용하여 EPK와 사용자의 신원을 안전하게 결합합니다.
### ESK의 역할
ESK(임시 비밀 키)는 사용자가 생성하고 보관하며, 주요 역할은 두 가지입니다:
1. **트랜잭션 서명**: 사용자는 ESK를 사용해 트랜잭션에 서명합니다. 이 서명은 트랜잭션의 무결성을 보장합니다.
2. **인증 및 보안**: ESK를 통해 생성된 서명은 EPK(임시 공개 키)와 짝을 이루어, 사용자가 해당 트랜잭션을 승인했음을 보장합니다.
### ESK와 EPK를 사용한 트랜잭션 서명 과정
1. **임시 키 생성**: 사용자가 임시 공개 키(EPK)와 임시 비밀 키(ESK)를 생성합니다.
2. **JWT 획득**: dApp이 OIDC 제공자(예: Google)로부터 JWT를 획득합니다. 이 JWT에는 사용자의 신원, dApp의 신원, EPK 커밋먼트가 포함됩니다.
3. **영지식 증명(ZKP)**: dApp이 증명 서비스를 통해 영지식 증명을 생성하여 사용자의 주소와 EPK를 안전하게 연결합니다.
4. **트랜잭션 서명**: 사용자가 ESK를 사용해 트랜잭션에 서명합니다.
5. **트랜잭션 제출**: dApp이 트랜잭션, ZKP, EPK 및 서명을 블록체인 검증자에게 보냅니다.
6. **검증 및 실행**: 검증자가 EPK, ZKP 및 서명을 확인하고, 유효한 경우 트랜잭션을 실행합니다.
### EPK와 서명 검증 과정
1. **서명 검증**: 제출된 트랜잭션의 서명은 제출된 ESK와 일치하는지 검증합니다. 이는 디지털 서명 알고리즘을 통해 이루어집니다.
2. **EPK 검증**: 영지식 증명(ZKP)을 통해 EPK와 사용자의 주소가 올바르게 연결되었는지 확인합니다. ZKP는 사용자의 신원을 드러내지 않고도 EPK의 유효성을 입증합니다.
3. **트랜잭션 실행**: EPK와 서명이 검증되면, 트랜잭션이 블록체인 네트워크에서 실행됩니다.
